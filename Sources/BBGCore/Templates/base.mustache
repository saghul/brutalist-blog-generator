<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="generator" content="Blutalist Blog Generator">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{$title}}{{title}}{{/title}}</title>
    <link rel="stylesheet" type="text/css" href="{{siteRoot}}main.css">
    <link rel="alternate" type="application/rss+xml" title="RSS" href="{{siteUrl}}/rss.xml">
</head>
<body data-theme="{{defaultTheme}}">
    <header>
        <hgroup>
            <h1>{{title}}</h1>
            <p>{{tagLine}}</p>
        </hgroup>
        <nav>
            <ul>
                {{#links}}
                    <li><a href="{{url}}">{{name}}</a></li>
                {{/links}}
                <li><button id="theme-toggle" aria-label="Toggle theme">üåô</button></li>
            </ul>
        </nav>
        <hr />
    </header>
    {{$content}}{{/content}}
    <footer>
        <small>
            {{footer}}
        </small>
    </footer>
    <script>
        (function() {
            const body = document.body;
            const button = document.getElementById('theme-toggle');
            const defaultTheme = body.getAttribute('data-theme');

            function getInitialTheme() {
                const saved = localStorage.getItem('theme');
                if (saved) return saved;

                if (defaultTheme === 'auto') {
                    return window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
                }

                return defaultTheme;
            }

            function updateTheme(theme) {
                body.setAttribute('data-theme', theme);
                button.textContent = theme === 'dark' ? '‚òÄÔ∏è' : 'üåô';
                localStorage.setItem('theme', theme);
            }

            const currentTheme = getInitialTheme();
            updateTheme(currentTheme);

            button.addEventListener('click', function() {
                const newTheme = body.getAttribute('data-theme') === 'dark' ? 'light' : 'dark';
                updateTheme(newTheme);
            });
        })();
    </script>
</body>
</html>
